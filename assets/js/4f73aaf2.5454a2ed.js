"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3013],{5375:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var s=n(4848),t=n(8453);const l={sidebar_position:4},a="Data Filtering",o={id:"tutorials-intermediate/filtering-data",title:"Data Filtering",description:"Sometimes you may want to filter the data in your dataset to only include certain records.",source:"@site/docs/tutorials-intermediate/filtering-data.md",sourceDirName:"tutorials-intermediate",slug:"/tutorials-intermediate/filtering-data",permalink:"/docs/docs/tutorials-intermediate/filtering-data",draft:!1,unlisted:!1,editUrl:"https://github.com/nodesteram-proj/docs/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials-intermediate/filtering-data.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Data Massaging",permalink:"/docs/docs/tutorials-intermediate/data-massaging"},next:{title:"Configuring Projects and Pipelines",permalink:"/docs/docs/tutorials-intermediate/configuring-projects"}},r={},c=[{value:"Including Records By Field Values",id:"including-records-by-field-values",level:2},{value:"Excluding Records By Field Values",id:"excluding-records-by-field-values",level:2},{value:"Including Records With Regex",id:"including-records-with-regex",level:2},{value:"Combining Filters",id:"combining-filters",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"data-filtering",children:"Data Filtering"}),"\n",(0,s.jsxs)(i.p,{children:["Sometimes you may want to filter the data in your dataset to only include certain records.\nNodestream provide some inbuilt filtering methods to help you do this.\nNote if none of the inbult filtering methods meet your needs, you can always ",(0,s.jsx)(i.a,{href:"../../tutorials-advanced/new-steps#creating-a-filter",children:"create your own filter"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"including-records-by-field-values",children:"Including Records By Field Values"}),"\n",(0,s.jsx)(i.p,{children:"Let's assume you have a dataset with the following records:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "name": "John",\n    "status": "active"\n  },\n  {\n    "name": "Jane",\n    "status": "inactive"\n  },\n  {\n    "name": "Bob",\n    "status": "part-time"\n  }\n]\n'})}),"\n",(0,s.jsxs)(i.p,{children:["We can use the ",(0,s.jsx)(i.code,{children:"ValuesMatchPossibilitiesFilter"})," to include only records where the ",(0,s.jsx)(i.code,{children:"status"})," field is either ",(0,s.jsx)(i.code,{children:"active"})," or ",(0,s.jsx)(i.code,{children:"part-time"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"- implementation: nodestream.pipeline.filters:ValuesMatchPossibilitiesFilter\n  arguments:\n    fields:\n    - value: !jmespath 'status'\n      possibilities:\n      - active\n      - part-time \n"})}),"\n",(0,s.jsx)(i.p,{children:"This will result into the following dataset:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "name": "John",\n    "status": "active"\n  },\n  {\n    "name": "Bob",\n    "status": "part-time"\n  }\n]\n'})}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"fields"})," argument is a list of fields to filter on. Each field is an object with the following properties:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"value"}),": A value to use to filter the records. Likely this will be a JMESPath expression into your record."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"possibilities"}),": A list of values to match against. If the value of the field matches any of these possibilities, the record will be included in the output dataset."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"normalization"})," (optional): A set of ",(0,s.jsx)(i.a,{href:"../data-massaging#normalization-flags",children:"normalization"})," rules to apply to the field value before matching. This can be useful if you want to match on a case-insensitive basis, for example."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["With this knowledge, you can build quite complex filters.\nFor example, you can include records where the ",(0,s.jsx)(i.code,{children:"status"})," field is ",(0,s.jsx)(i.code,{children:"active"})," and the ",(0,s.jsx)(i.code,{children:"name"})," field is ",(0,s.jsx)(i.code,{children:"John"})," (case-insensitive) as follows:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"- implementation: nodestream.pipeline.filters:ValuesMatchPossibilitiesFilter\n  arguments:\n    fields:\n    - value: !jmespath 'status'\n      possibilities:\n      - active\n    - value: !jmespath 'name'\n      possibilities:\n      - john\n      normalization:\n        - lowercase_strings\n"})}),"\n",(0,s.jsx)(i.p,{children:"This will result into the following dataset:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "name": "John",\n    "status": "active"\n  }\n]\n'})}),"\n",(0,s.jsx)(i.h2,{id:"excluding-records-by-field-values",children:"Excluding Records By Field Values"}),"\n",(0,s.jsxs)(i.p,{children:["You can also use the ",(0,s.jsx)(i.code,{children:"ExcludeWhenValuesMatchPossibilities"})," filter to exclude records that match certain criteria.\nConceptually, this filter is the opposite of the ",(0,s.jsx)(i.code,{children:"ValuesMatchPossibilitiesFilter"})," filter. (And fun fact; its implemented as such).\nTaking the same dataset as above, you can exclude records where the ",(0,s.jsx)(i.code,{children:"status"})," field is ",(0,s.jsx)(i.code,{children:"inactive"})," as follows:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"- implementation: nodestream.pipeline.filters:ExcludeWhenValuesMatchPossibilities\n  arguments:\n    fields:\n    - value: !jmespath 'status'\n      possibilities:\n      - inactive\n"})}),"\n",(0,s.jsx)(i.p,{children:"This will result into the following dataset:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "name": "John",\n    "status": "active"\n  },\n  {\n    "name": "Bob",\n    "status": "part-time"\n  }\n]\n'})}),"\n",(0,s.jsxs)(i.p,{children:["The same options are available for this filter as for the ",(0,s.jsx)(i.code,{children:"ValuesMatchPossibilitiesFilter"})," filter:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"fields"}),": A list of fields to filter on. Each field is an object with the following properties:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"value"}),": A value to use to filter the records. Likely this will be a JMESPath expression into your record."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"possibilities"}),": A list of values to match against. If the value of the field matches any of these possibilities, the record will be excluded from the output dataset."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"normalization"})," (optional): A set of ",(0,s.jsx)(i.a,{href:"../data-massaging#normalization-flags",children:"normalization"})," rules to apply to the field value before matching. This can be useful if you want to match on a case-insensitive basis, for example."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"including-records-with-regex",children:"Including Records With Regex"}),"\n",(0,s.jsxs)(i.p,{children:["You can use the ",(0,s.jsx)(i.code,{children:"ValuesMatchRegexFilter"})," filter to include only records where a field matches a regular expression.\nFor example, you can include records where the ",(0,s.jsx)(i.code,{children:"name"})," field starts with ",(0,s.jsx)(i.code,{children:"J"})," as follows:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"- implementation: nodestream.pipeline.filters:ValuesMatchRegexFilter\n  arguments:\n    fields:\n    - value: !jmespath 'name'\n      regex: '^J'\n"})}),"\n",(0,s.jsx)(i.p,{children:"This will result into the following dataset:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "name": "John",\n    "status": "active"\n  },\n  {\n    "name": "Jane",\n    "status": "inactive"\n  }\n]\n'})}),"\n",(0,s.jsx)(i.h2,{id:"combining-filters",children:"Combining Filters"}),"\n",(0,s.jsxs)(i.p,{children:["You can combine filters to create more complex filtering logic.\nSince the pipeline is a list of processing steps, you can simply add multiple filters to the pipeline to achieve this.\nFor example, you can include records where the ",(0,s.jsx)(i.code,{children:"status"})," field is ",(0,s.jsx)(i.code,{children:"active"})," and the ",(0,s.jsx)(i.code,{children:"name"})," field is ",(0,s.jsx)(i.code,{children:"John"})," (case-insensitive) and exclude records where the ",(0,s.jsx)(i.code,{children:"status"})," field is ",(0,s.jsx)(i.code,{children:"part-time"})," as follows:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"- implementation: nodestream.pipeline.filters:ValuesMatchPossibilitiesFilter\n  arguments:\n    fields:\n    - value: !jmespath 'status'\n      possibilities:\n      - active\n    - value: !jmespath 'name'\n      possibilities:\n      - john\n      normalization:\n        - lowercase_strings\n- implementation: nodestream.pipeline.filters:ExcludeWhenValuesMatchPossibilities\n    arguments:\n        fields:\n        - value: !jmespath 'status'\n        possibilities:\n        - part-time\n"})}),"\n",(0,s.jsx)(i.p,{children:"This will result into the following dataset:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n    {\n        "name": "John",\n        "status": "active"\n    }\n]\n'})})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>o});var s=n(6540);const t={},l=s.createContext(t);function a(e){const i=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(l.Provider,{value:i},e.children)}}}]);