"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7478],{8386:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>u});var i=t(4848),l=t(8453),a=t(1470),r=t(9365);const o={sidebar_position:2},s="Building a Plugin",d={id:"tutorials-advanced/building-plugins",title:"Building a Plugin",description:"Ship a unit of functionality as a nodestream plugin.",source:"@site/docs/tutorials-advanced/building-plugins.mdx",sourceDirName:"tutorials-advanced",slug:"/tutorials-advanced/building-plugins",permalink:"/docs/docs/tutorials-advanced/building-plugins",draft:!1,unlisted:!1,editUrl:"https://github.com/nodesteram-proj/docs/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials-advanced/building-plugins.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Building New Steps",permalink:"/docs/docs/tutorials-advanced/new-steps"},next:{title:"Extending the CLI",permalink:"/docs/docs/tutorials-advanced/extending-the-cli"}},c={},u=[{value:"Overview",id:"overview",level:2},{value:"Common Plugin Types",id:"common-plugin-types",level:2},{value:"Project Plugins",id:"project-plugins",level:3},{value:"Component Plugins",id:"component-plugins",level:3},{value:"Utility Plugins",id:"utility-plugins",level:3},{value:"Database Plugins",id:"database-plugins",level:3},{value:"Plugin Structure",id:"plugin-structure",level:2},{value:"pyproject.toml",id:"pyprojecttoml",level:3},{value:"<code>tests</code> directory",id:"tests-directory",level:3},{value:"<code>great_plugin</code> directory",id:"great_plugin-directory",level:3},{value:"Implementing Plugin Behavior",id:"implementing-plugin-behavior",level:2},{value:"Distributing Pipelines",id:"distributing-pipelines",level:3},{value:"Registering a Project Plugin",id:"registering-a-project-plugin",level:4},{value:"Steps (Extractors, Transformers, Filters)",id:"steps-extractors-transformers-filters",level:3},{value:"Extra Functionality",id:"extra-functionality",level:3},{value:"Packaging and Publishing",id:"packaging-and-publishing",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"building-a-plugin",children:"Building a Plugin"}),"\n",(0,i.jsx)(n.p,{children:"Ship a unit of functionality as a nodestream plugin."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"A plugin allows developers to integrate additional functionality into the nodestream platform.\nA plugin can be as simple as a simple filter or as complex as a fully-fledget set of pipelines and components.\nThe plugin system is designed to be flexible and allow for a wide range of functionality to be added. Fundmentally, a plugin is simply a python package with particular entry points."}),"\n",(0,i.jsx)(n.p,{children:"You are going to want to build a plugin if:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You want to add and share functionality with the nodestream community"}),"\n",(0,i.jsx)(n.li,{children:"You want to add functionality to your own project but want to keep it separate from the main codebase"}),"\n",(0,i.jsx)(n.li,{children:"Distribute functionality to other developers in a way that is easy to integrate and use"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-plugin-types",children:"Common Plugin Types"}),"\n",(0,i.jsx)(n.p,{children:"Because the plugin system is so flexible, there are many different types of plugins that can be built.\nWe can broadly categorize plugins into a few different types.\nA plugin can be more than one type at once or completely unique."}),"\n",(0,i.jsx)(n.h3,{id:"project-plugins",children:"Project Plugins"}),"\n",(0,i.jsxs)(n.p,{children:["Project plugins are plugins that allow a developer to modify, extend, or in otherwise interact with the consumers project.\nCommonly this is to add new pipelines to a project that are logically very similar to one another.\nOur ",(0,i.jsx)(n.a,{href:"../../official-plugins/akamai",children:"Akamai"})," plugin is a good example of this.\nIt adds a set of pipelines that are all related to the Akamai platform."]}),"\n",(0,i.jsx)(n.h3,{id:"component-plugins",children:"Component Plugins"}),"\n",(0,i.jsx)(n.p,{children:"Component plugins are plugins that add new components to the nodestream platform.\nThis could be new filters, extractors, or other components that can be used in pipelines.\nThis could also be a set of components that are logically related to one another."}),"\n",(0,i.jsxs)(n.p,{children:["Our ",(0,i.jsx)(n.a,{href:"../../official-plugins/akamai",children:"Akamai"})," plugin is also a good example of this.\nIn order to interact with the Akamai platform, we need to be able to authenticate with its apis and make requests.\nTherfore the Akamai plugin adds a set of extractors that are all related to the Akamai platform."]}),"\n",(0,i.jsxs)(n.p,{children:["Another, more pure example, is our ",(0,i.jsx)(n.a,{href:"../../official-plugins/shell",children:"Shell"})," plugin.\nThis plugin adds a single component that allows you to run shell commands as part of a pipeline."]}),"\n",(0,i.jsx)(n.h3,{id:"utility-plugins",children:"Utility Plugins"}),"\n",(0,i.jsx)(n.p,{children:"Utility plugins are all about making the developers life easier.\nThis could include things like adding audits or other utilities to the developer"}),"\n",(0,i.jsxs)(n.p,{children:["Our ",(0,i.jsx)(n.a,{href:"../../official-plugins/pedantic",children:"Pedantic"})," and ",(0,i.jsx)(n.a,{href:"../../official-plugins/dotenv",children:"DotEnv"})," plugins are good examples of this.\nThe Pedantic plugin adds a set of audits that can be used to enforce a set of naming conventions while the DotEnv plugin allows you to interact source .env file at project runtime."]}),"\n",(0,i.jsx)(n.h3,{id:"database-plugins",children:"Database Plugins"}),"\n",(0,i.jsx)(n.p,{children:"Database plugins are plugins that allow you to interact with a database.\nThese are generally the most complex plugins as they require a lot of setup, configuration, and testing.\nThey also require an understanding of the database that you are interacting with."}),"\n",(0,i.jsxs)(n.p,{children:["Our ",(0,i.jsx)(n.a,{href:"../../databases/neo4j",children:"Neo4j"})," and ",(0,i.jsx)(n.a,{href:"../../databases/neptune",children:"Neptune"})," support are implementations of this type of plugin."]}),"\n",(0,i.jsx)(n.h2,{id:"plugin-structure",children:"Plugin Structure"}),"\n",(0,i.jsx)(n.p,{children:"A plugin is simply a python package with a particular structure."}),"\n",(0,i.jsxs)(n.p,{children:["For the purposes of this guide, we'll walk you through starting a project in ",(0,i.jsx)(n.a,{href:"https://python-poetry.org/",children:"poetry"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can start by creating a new directory for your plugin and running ",(0,i.jsx)(n.code,{children:"poetry new <plugin-name>"}),". For example,"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry new nodestream-plugin-great-plugin\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["While the ",(0,i.jsx)(n.code,{children:"nodestream-plugin"})," prefix is not required, it is a good practice to use it to make it clear that this is a nodestream plugin."]})}),"\n",(0,i.jsx)(n.p,{children:"This will create a new directory with the following structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"nodestream-plugin-great-plugin\n\u251c\u2500\u2500 great_plugin\n\u2502   \u2514\u2500\u2500 __init__.py\n\u251c\u2500\u2500 tests\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 test_great_plugin.py\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pyprojecttoml",children:"pyproject.toml"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"pyproject.toml"})," file is the configuration file for poetry.\nIt contains all of the information about your project and its dependencies.\nYou can add your dependencies here and poetry will manage them for you.\nBy default, it will look something like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[tool.poetry]\nname = "nodestream-plugin-great-plugin"\nversion = "0.1.0"\ndescription = "A great plugin for nodestream"\nauthors = ["Your Name < [your email]>"]\n\n[tool.poetry.dependencies]\npython = "^3.8"\n\n[tool.poetry.dev-dependencies]\npytest = "^6.2"\n\n[build-system]\nrequires = ["poetry-core>=1.0.0"]\n'})}),"\n",(0,i.jsx)(n.p,{children:"The first thing you will want to do is add nodestream as a dependency.\nYou can do this by running this command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry add nodestream\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will add nodestream to your dependencies and install it for you."}),"\n",(0,i.jsx)(n.p,{children:"The other thing you will want to do is define the entry points for your plugin.\nThis is how nodestream will know how to load your plugin.\nThis varies depending on what extension points you are implementing."}),"\n",(0,i.jsxs)(n.p,{children:["For many things, you will want to add an entry point to the ",(0,i.jsx)(n.code,{children:"nodestream.plugins"})," group.\nFor example, if you are adding a new audit, you will want to add an entry point like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[tool.poetry.plugins."nodestream.plugins"]\naudits = "nodestream_plugin_great_plugin.audits"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This tells nodestream that your plugin has a set of audits that it can load.\nIn this case, it will look for a module called ",(0,i.jsx)(n.code,{children:"audits"})," in the ",(0,i.jsx)(n.code,{children:"nodestream_plugin_great_plugin"})," package."]}),"\n",(0,i.jsxs)(n.h3,{id:"tests-directory",children:[(0,i.jsx)(n.code,{children:"tests"})," directory"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"tests"})," directory is where you will put your tests.\nYou can use the ",(0,i.jsx)(n.code,{children:"pytest"})," framework to write your tests."]}),"\n",(0,i.jsxs)(n.h3,{id:"great_plugin-directory",children:[(0,i.jsx)(n.code,{children:"great_plugin"})," directory"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"great_plugin"})," directory is where you will put your plugin code.\nThis is where you will define your components, pipelines, and other functionality."]}),"\n",(0,i.jsx)(n.h2,{id:"implementing-plugin-behavior",children:"Implementing Plugin Behavior"}),"\n",(0,i.jsx)(n.h3,{id:"distributing-pipelines",children:"Distributing Pipelines"}),"\n",(0,i.jsx)(n.p,{children:"If you have a set of pipelines that you want to distribute with your plugin, you can do this by including them in your plugin package."}),"\n",(0,i.jsxs)(n.p,{children:["For example, you can include the ",(0,i.jsx)(n.code,{children:"yaml"})," files directly in your package and then load them in your plugin code."]}),"\n",(0,i.jsx)(n.p,{children:"Consider the following directory structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"nodestream-plugin-great-plugin\n\u251c\u2500\u2500 great_plugin\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 pipeline.yaml\n\u251c\u2500\u2500 tests\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 test_great_plugin.py\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note the ",(0,i.jsx)(n.code,{children:"pipeline.yaml"})," file in the ",(0,i.jsx)(n.code,{children:"great_plugin"})," directory.\nWe can create a ",(0,i.jsx)(n.code,{children:"ProjectPlugin"})," that loads this pipeline like this inside of a newly created ",(0,i.jsx)(n.code,{children:"plugin.py"})," file inside of the ",(0,i.jsx)(n.code,{children:"great_plugin"})," directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# great_plugin/plugin.py\n\nfrom nodestream.project import Project, ProjectPlugin\n\n\nclass GreatPlugin(ProjectPlugin):\n    def activate(self, project: Project) -> None:\n        project.add_plugin_scope_from_pipeline_resources(\n            name="great", package="great_plugin"\n        )\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This will load the ",(0,i.jsx)(n.code,{children:"pipeline.yaml"})," file and make it available to the project inside of the ",(0,i.jsx)(n.code,{children:"great"})," scope."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ProjectPlugin"})," is a class that you can subclass to define your plugin.\nIn addition to the activate method, project plugins can optionally implement the following lifecycle methods:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"def before_project_load(self, file_path: Path) -> None"})}),"\n",(0,i.jsx)(n.p,{children:"Called before a project is loaded. The file_path argument is the path to the project file."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"def after_project_load(self, project: Project) -> None"})}),"\n",(0,i.jsx)(n.p,{children:"Called after the project is loaded and all project plugins have been activated."}),"\n",(0,i.jsx)(n.h4,{id:"registering-a-project-plugin",children:"Registering a Project Plugin"}),"\n",(0,i.jsxs)(n.p,{children:["Project plugins are registered via\nthe ",(0,i.jsx)(n.a,{href:"https://setuptools.pypa.io/en/latest/userguide/entry_point.html#entry-points-for-plugins",children:"entry_points"})," API of a Python Package.\nSpecifically, the ",(0,i.jsx)(n.code,{children:"entry_point"})," named ",(0,i.jsx)(n.code,{children:"project"})," inside of the ",(0,i.jsx)(n.code,{children:"nodestream.plugins"})," group is loaded.\nAll project plugins are expected to be a subclass of ",(0,i.jsx)(n.code,{children:"nodestream.project:ProjectPlugin"})," as directed above.\nAn instance of the class is created and the ",(0,i.jsx)(n.code,{children:"activate"})," method is called with an instance of ",(0,i.jsx)(n.code,{children:"nodestream.project:Project"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"entry_point"})," should be a module that contains at least one ",(0,i.jsx)(n.code,{children:"ProjectPlugin"})," class.\nAt runtime, the module will be loaded and all classes that inherit from ",(0,i.jsx)(n.code,{children:"nodestream.project:ProjectPlugin"})," will be registered."]}),"\n",(0,i.jsxs)(a.A,{defaultValue:"pyproject",values:[{label:"pyproject.toml",value:"pyproject"},{label:"poetry",value:"poetry"},{label:"setup.cfg",value:"setup-cfg"},{label:"setup.py",value:"setup-py"}],children:[(0,i.jsx)(r.A,{value:"pyproject",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[project.entry-points."nodestream.plugins"]\nprojects = "my_python_package.plugin"\n'})})}),(0,i.jsx)(r.A,{value:"poetry",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[tool.poetry.plugins."nodestream.plugins"]\nprojects = "my_python_package.plugin"\n'})})}),(0,i.jsx)(r.A,{value:"setup-cfg",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"[options.entry_points]\nnodestream.plugins =\n    projects = my_python_package.plugin\n"})})}),(0,i.jsx)(r.A,{value:"setup-py",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\nsetup(\n    # ...,\n    entry_points = {\n        'nodestream.plugins': [\n            'projects = nodestream_plugin_cool.plugin',\n        ]\n    }\n)\n"})})})]}),"\n",(0,i.jsx)(n.h3,{id:"steps-extractors-transformers-filters",children:"Steps (Extractors, Transformers, Filters)"}),"\n",(0,i.jsx)(n.p,{children:"If you have a set of steps that you want to distribute with your plugin, you can do this by including them in your plugin package.\nNo other work is required to make these steps available to the project.\nUsers can use them in their project by referencing them by module and class name."}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you have a ",(0,i.jsx)(n.code,{children:"MyExtractor"})," class in a ",(0,i.jsx)(n.code,{children:"my_extractor.py"})," file in the ",(0,i.jsx)(n.code,{children:"great_plugin"})," package, you can use it in your project like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"implementation: great_plugin.my_extractor.MyExtractor\n"})}),"\n",(0,i.jsx)(n.h3,{id:"extra-functionality",children:"Extra Functionality"}),"\n",(0,i.jsxs)(n.p,{children:["For the specifics of what entry points you need to define, you will need to refer to the documentation for the specific extension point you are implementing.\nThese can be found in the ",(0,i.jsx)(n.a,{href:"../extending-the-cli",children:"Extending the CLI"})," and ",(0,i.jsx)(n.a,{href:"../extending-the-dsl",children:"Extending the DSL"})," sections of the documentation."]}),"\n",(0,i.jsx)(n.h2,{id:"packaging-and-publishing",children:"Packaging and Publishing"}),"\n",(0,i.jsx)(n.p,{children:"Once you have your plugin written, you will want to package and distribute it.\nThis will allow other developers to install and use your plugin."}),"\n",(0,i.jsx)(n.p,{children:"You can do this by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry publish [--build]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This will publish your plugin to PyPi and make it available for other developers to install.\nIf you pass the ",(0,i.jsx)(n.code,{children:"--build"})," flag, it will also build your plugin before publishing it.\nIf you don't pass the ",(0,i.jsx)(n.code,{children:"--build"})," flag, you will need to build your plugin before publishing it by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"poetry build\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>r});t(6540);var i=t(4164);const l={tabItem:"tabItem_Ymn6"};var a=t(4848);function r(e){let{children:n,hidden:t,className:r}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(l.tabItem,r),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>w});var i=t(6540),l=t(4164),a=t(3104),r=t(6347),o=t(205),s=t(7485),d=t(1682),c=t(9466);function u(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:l}}=e;return{value:n,label:t,attributes:i,default:l}}))}(t);return function(e){const n=(0,d.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const l=(0,r.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s.aZ)(a),(0,i.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(l.location.search);n.set(a,e),l.replace({...l.location,search:n.toString()})}),[a,l])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:l}=e,a=p(e),[r,s]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:a}))),[d,u]=g({queryString:t,groupId:l}),[m,y]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,a]=(0,c.Dv)(t);return[l,(0,i.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:l}),f=(()=>{const e=d??m;return h({value:e,tabValues:a})?e:null})();(0,o.A)((()=>{f&&s(f)}),[f]);return{selectedValue:r,selectValue:(0,i.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),y(e)}),[u,y,a]),tabValues:a}}var y=t(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(4848);function x(e){let{className:n,block:t,selectedValue:i,selectValue:r,tabValues:o}=e;const s=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.a_)(),c=e=>{const n=e.currentTarget,t=s.indexOf(n),l=o[t].value;l!==i&&(d(n),r(l))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>s.push(e),onKeyDown:u,onClick:c,...a,className:(0,l.A)("tabs__item",f.tabItem,a?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function b(e){let{lazy:n,children:t,selectedValue:l}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===l));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function v(e){const n=m(e);return(0,j.jsxs)("div",{className:(0,l.A)("tabs-container",f.tabList),children:[(0,j.jsx)(x,{...e,...n}),(0,j.jsx)(b,{...e,...n})]})}function w(e){const n=(0,y.A)();return(0,j.jsx)(v,{...e,children:u(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(6540);const l={},a=i.createContext(l);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);